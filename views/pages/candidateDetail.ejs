<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head') %>
</head>

<style>
/* Fix for contact information text visibility */
.contact-card .card-body {
    background-color: #343a40 !important;
    color: #ffffff !important;
}

.contact-card .card-body strong {
    color: #e3f2fd !important;
    font-weight: 600 !important;
}

.contact-card .card-body a {
    color: #64b5f6 !important;
    text-decoration: none !important;
}

.contact-card .card-body a:hover {
    color: #90caf9 !important;
    text-decoration: underline !important;
}

.contact-card .card-body span {
    color: #ffffff !important;
}

/* Resume content text visibility fix */
.resume-content-text {
    color: #000000 !important;
    background-color: #ffffff !important;
    font-family: 'Segoe UI', Arial, sans-serif !important;
    font-size: 1rem !important;
    line-height: 1.6 !important;
    font-weight: 400 !important;
    padding: 1.5rem !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 0.375rem !important;
    white-space: pre-wrap !important;
}

/* Skills badges */
.badge {
    color: #ffffff !important;
    background-color: #1976d2 !important;
}

.text-muted {
    color: #6c757d !important;
}
</style>

<body>
  <!-- <%- include('../partials/navbar') %> -->

  <div class="container my-4">
    <!-- Back Button -->
    <div class="mb-3">
      <a href="javascript:history.back()" class="btn btn-outline-primary">
        <i class="fas fa-arrow-left"></i> Back
      </a>
    </div>

    <!-- Candidate Header -->
    <div class="detail-header mb-4">
      <div class="row align-items-center">
        <div class="col-md-2 text-center">
          <i class="fas fa-user-circle candidate-avatar" style="font-size: 4rem; color: #007bff;"></i>
        </div>
        <div class="col-md-8">
          <h1 class="detail-title" style="color: #212529; font-size: 2.5rem; font-weight: 700;">
            <%= (resume && resume.candidateName) ? resume.candidateName : 'Unknown Candidate' %>
          </h1>
          <p class="detail-subtitle" style="color: #6c757d;">Candidate Profile</p>
        </div>
        <div class="col-md-2 text-end">
          <a href="/dashboard/resumes/processed" class="btn btn-outline-primary">
            <i class="fas fa-list"></i> All Resumes
          </a>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Left Column - Contact Information -->
      <div class="col-md-4">
        <div class="card mb-4 contact-card">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="fas fa-address-card"></i> Contact Information</h5>
          </div>
          <div class="card-body">
            <% if (resume && resume.email) { %>
              <div class="mb-2">
                <strong><i class="fas fa-envelope"></i> Email:</strong><br>
                <a href="mailto:<%= resume.email %>"><%= resume.email %></a>
              </div>
            <% } %>
            
            <% if (resume && resume.phone) { %>
              <div class="mb-2">
                <strong><i class="fas fa-phone"></i> Phone:</strong><br>
                <span><%= resume.phone %></span>
              </div>
            <% } %>
            
            <% if (resume && resume.uploadDate) { %>
              <div class="mb-2">
                <strong><i class="fas fa-calendar"></i> Uploaded:</strong><br>
                <span><%= resume.uploadDate.toLocaleDateString() %></span>
              </div>
            <% } %>

            <% if (resume && resume.experience && resume.experience.years !== undefined) { %>
              <div class="mb-2">
                <strong><i class="fas fa-briefcase"></i> Experience:</strong><br>
                <span><%= resume.experience.years %> years</span>
              </div>
            <% } %>

            <% if (resume && resume.education && resume.education.degree) { %>
              <div class="mb-2">
                <strong><i class="fas fa-graduation-cap"></i> Education:</strong><br>
                <span><%= resume.education.degree %></span>
              </div>
            <% } %>
          </div>
        </div>

        <!-- Skills Section -->
        <div class="card mb-4">
          <div class="card-header bg-success text-white">
            <h5 class="mb-0"><i class="fas fa-cogs"></i> Extracted Skills</h5>
          </div>
          <div class="card-body">
            <% if (resume && resume.skills && resume.skills.length > 0) { %>
              <div class="d-flex flex-wrap gap-1">
                <% resume.skills.forEach(skill => { %>
                  <span class="badge bg-primary"><%= skill %></span>
                <% }) %>
              </div>
              <div class="mt-2">
                <small class="text-muted">Total: <%= resume.skills.length %> skills</small>
              </div>
            <% } else { %>
              <p class="text-muted mb-0">No skills extracted</p>
            <% } %>
          </div>
        </div>
      </div>

      <!-- Right Column - Resume Content -->
      <div class="col-md-8">
        <div class="card">
          <div class="card-header bg-secondary text-white">
            <h5 class="mb-0"><i class="fas fa-file-text"></i> Resume Content</h5>
          </div>
          <div class="card-body" style="max-height: 600px; overflow-y: auto;">
            <% if (resume && resume.extractedText) { %>
              <div class="resume-content-text">
                <%= resume.extractedText %>
              </div>
              <div class="mt-3">
                <small style="color: #6c757d;">
                  <i class="fas fa-info-circle"></i> Content Length: <%= resume.extractedText.length %> characters
                </small>
              </div>
            <% } else { %>
              <div class="text-center py-5" style="color: #6c757d;">
                <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
                <p>No content extracted from resume</p>
              </div>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <%- include('../partials/footer') %> -->
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
